# Product Configurator API

This project is a Flask-based backend API for defining and validating product configurations. It allows for the creation of product templates, configurable options, and complex compatibility rules between those options.

## Problem Statement

The goal is to build a backend for storing product templates, their configurable option categories, specific options within those categories, and rules about compatibility and pricing.

### Key Data Entities

*   **ProductTemplate**: Stores base product models (e.g., "Laptop Model X").
*   **OptionCategory**: Defines categories of options for a template (e.g., "CPU", "RAM", "Storage" for "Laptop Model X").
*   **OptionChoice**: Specific choices within a category (e.g., "Intel i7", "AMD Ryzen 7" for CPU; "16GB DDR4", "32GB DDR4" for RAM). Includes a price adjustment for each choice.
*   **CompatibilityRule**: Defines dependencies or incompatibilities (e.g., "Intel i7" REQUIRES "Motherboard Z"; "AMD GPU" INCOMPATIBLE_WITH "Intel CPU").

### Milestones / Core Features

1.  **Add Compatibility Rule**:
    *   `POST /product-templates/{template_str_id}/compatibility-rules`
    *   Accepts: `{"rule_type": "REQUIRES", "primary_choice_str_id": "intel_i7", "secondary_choice_str_id": "mobo_z"}`
    *   Functionality: Stores a compatibility rule between two option choices within the template.

2.  **Get Available Options for a Category (Given Current Selections)**:
    *   `POST /product-templates/{template_str_id}/available-options/{target_category_str_id}`
    *   Accepts: `{"current_selections": {"cpu": "intel_i7", "ram": "16gb_ddr4"}}`
    *   Functionality: Based on the `current_selections` and defined compatibility rules, return a list of valid `OptionChoice`s for the `target_category_str_id`.

3.  **Validate Full Configuration and Get Price**:
    *   `POST /product-templates/{template_str_id}/validate-configuration`
    *   Accepts: `{"selections": {"cpu": "intel_i7", "ram": "16gb_ddr4", "storage": "ssd_512"}}`
    *   Functionality: Validates the complete set of selections against all compatibility rules. If valid, calculates the total price (`base_price` + sum of `price_deltas`).

## Technology Stack

*   **Backend Framework**: Flask (Python)
*   **Database**: PostgreSQL
*   **Database Connector**: psycopg2

## Setup and Running the Project

Follow these steps to get the project running locally.

### 1. Prerequisites

*   Python 3.8+
*   PostgreSQL

### 2. Clone the Repository

```bash
git clone https://github.com/Maverick101321/think41_task_full_stack.git
cd think41_task_full_stack
```

### 3. Set Up a Virtual Environment

It's highly recommended to use a virtual environment to manage project dependencies.

```bash
# For macOS/Linux
python3 -m venv venv
source venv/bin/activate

# For Windows
python -m venv venv
.\venv\Scripts\activate
```

### 4. Install Dependencies

```bash
pip install -r requirements.txt
```

### 5. Configure the Database

1.  Make sure your PostgreSQL server is running.
2.  Create a database and a user for the application.
3.  Set the `DATABASE_URL` environment variable. This is the recommended approach for security.
    ```bash
    # Example for macOS/Linux
    export DATABASE_URL='postgresql://your_user:your_password@localhost:5432/your_db_name'
    ```
    Alternatively, you can modify the default connection string directly in `config.py` for local development (not recommended for production).

4.  Create the database tables by running the schema script.
    ```bash
    # Replace with your actual database name and user
    psql -d your_db_name -U your_user -f schema.sql
    ```

### 6. Run the Application

```bash
flask run
```

The API will be running at `http://127.0.0.1:5000`. You can access the welcome message by navigating to this URL in your browser.

---

*This README was generated by Gemini Code Assist.*